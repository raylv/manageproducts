/*
 * Copyright (C) 2009-2016 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["sap/ui/base/Object","sap/ui/model/Sorter","sap/ui/model/Filter","sap/ui/model/FilterType","sap/ui/model/FilterOperator"],function(O,S,F,a,b){"use strict";return O.extend("nw.epm.refapps.ext.prod.manage.util.TableOperations",{constructor:function(t,s,d){var c="",g=null,f=[],e=[],G=false,h=false,j=false,k=false,l=[(d)?d:new S("Name",false)],o={};this._resetChangeIndicators=function(){G=false;h=false;j=false;k=false;};this.addSorter=function(m){var i=this._getSortListIndexByPath(m.sPath);if(i!==-1){l.splice(i,1);}l.unshift(m);if(g&&g.sPath===m.sPath){g.bDescending=m.bDescending;}k=true;};this.setGrouping=function(n){var i=this._getSortListIndexByPath(n.sPath);if(i!==-1){l[i].bDescending=n.bDescending;}g=n;G=true;};this._getSortListIndexByPath=function(p){var i;for(i=0;i<l.length;i++){if(l[i].sPath===p){return i;}}return-1;};this.removeGrouping=function(){g=null;G=true;};this.getGrouping=function(){return g;};this.getSorter=function(){return l;};this.resetFilters=function(){f.length=0;o={};j=true;};this.addFilter=function(i,m){if(o[m]){o[m].push(i);}else{o[m]=[i];}f.length=0;for(var p in o){if(o[p].length>1){f.push(new F(o[p],false));}else{f.push(o[p][0]);}}j=true;};this.getFilterTable=function(){return(f&&f.length>0)?f:null;};this.setSearchTerm=function(n){e.length=0;if(n){c=n;for(var i=0;i<s.length;i++){e.push(new F(s[i],b.Contains,n));}}else{c="";e.length=0;}h=true;};this.getSearchTerm=function(){return c;};this.applyTableOperations=function(){var A=[],i=[],T=t.getBinding("items");if(T){if(G||k){if(g){A.push(g);}if(l.length>0){A=A.concat(l);}T.sort(A);}if(h||j){if(e.length>0){i.push(new F(e,false));}if(f.length>0){i.push(new F(f,true));}T.filter(i.length>0&&new F(i,true));}this._resetChangeIndicators();}};}});});
